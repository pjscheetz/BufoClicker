"use strict";(self.webpackChunkbufo_clicker=self.webpackChunkbufo_clicker||[]).push([[98],{98:(e,o,t)=>{t.r(o),t.d(o,{default:()=>M,events:()=>m,events_debug:()=>G,explorer:()=>A,gameCore:()=>f,gameLoop:()=>h,generator_debug:()=>E,generators:()=>S,help:()=>D,inspect:()=>C,logging:()=>B,performance:()=>$,reset:()=>U,resources:()=>x,save:()=>_,state:()=>b,time:()=>w,ui:()=>v,upgrade_debug:()=>L,upgrades:()=>k});var s=t(393),a=t(794),r=t(634),l=t(43),n=t(437),g=t(957),c=t(474),u=t(205),d=t(832),i=t(628),p=t(889);const b=(0,s.b)(),m=(0,a.J)(),f=(0,r.a)(),h=(0,l.h)(),v=(0,n.Q)(),S=(0,g.B)(),k=(0,c.Z)(),A=(0,u.F)(),_={save:()=>(0,d.KN)(),load:()=>(0,d.d5)(),export:()=>(0,d.ki)(),import:e=>(0,d.bB)(e)},w={pause:()=>h.stop(),resume:()=>h.start(),setTimeScale:e=>h.setTimeScale(e),getTimeScale:()=>h.getTimeScale()},x={add:e=>{const o=b.getState();return b.setState({resources:{bufos:o.resources.bufos+e,totalBufos:o.resources.totalBufos+e}}),o.resources.bufos+e},set:e=>(b.setState({resources:{bufos:e,totalBufos:Math.max(e,b.getState().resources.totalBufos)}}),e),get:()=>{const e=b.getState();return{bufos:e.resources.bufos,totalBufos:e.resources.totalBufos}}},C={state:()=>b.getState(),generators:()=>S.getAllGenerators(),upgrades:()=>({purchased:k.getPurchasedUpgrades(),available:k.getAvailableUpgrades()}),explorer:()=>A.getExplorer(),production:()=>S.getProductionStats()},G={enableDebug:()=>m.setDebugMode(!0),disableDebug:()=>m.setDebugMode(!1),listEvents:()=>m.getEventNames(),emit:(e,o)=>m.emit(e,o)},B={setLevel:e=>i.He(e),getLevel:()=>i.XM(),enableTimestamps:e=>i.Ti(e),enableConsoleColors:e=>i.lJ(e)},E={unlockAll:()=>(S.getAllGenerators().forEach((e=>{e.unlocked||b.setState({generators:{[e.id]:{unlocked:!0,enabled:!0}}})})),"All generators unlocked"),give:(e,o=1)=>{const t=b.getState();if(!Object.values(p.I2).includes(e))return`Generator ${e} not found - valid types are: ${Object.values(p.I2).join(", ")}`;const s=e,a=t.generators[s];return a?(b.setState({generators:{[s]:{count:a.count+o}}}),S.recalculateGenerator(s),`Added ${o} ${a.name} generators`):`Generator ${e} exists in enum but not in state - this is an error`}},L={unlockAll:()=>{const e=k.getAvailableUpgrades(),o=(k.getPurchasedUpgrades(),b.getState());return b.setState({upgrades:{available:[...o.upgrades.available,...e.map((e=>e.id))]}}),`Unlocked ${e.length} upgrades`},purchase:e=>k.purchaseUpgrade(e,1/0).success?`Purchased upgrade ${e}`:`Failed to purchase ${e}`},U={softReset:()=>(f.resetState(),"Game state reset"),hardReset:()=>(localStorage.clear(),window.location.reload(),"Local storage cleared, reloading page")},$={measure:(e,o)=>{console.time(e);try{o()}finally{console.timeEnd(e)}}};function D(){return console.group("%cüê∏ Bufo Idle Debug Tools üê∏","color: #4CAF50; font-weight: bold;"),console.log("%cState Management:","font-weight: bold;"),console.log("- state: Access to the state manager"),console.log("- inspect: Functions to inspect game state"),console.log("- resources: Manipulate game resources"),console.log("%cGame Control:","font-weight: bold;"),console.log("- gameCore: Access to the game core"),console.log("- gameLoop: Access to the game loop"),console.log("- time: Control game time"),console.log("%cSaving/Loading:","font-weight: bold;"),console.log("- save: Save/load/export/import functions"),console.log("- reset: Reset game state"),console.log("%cDebugging:","font-weight: bold;"),console.log("- events: Event bus access"),console.log("- events_debug: Event debugging tools"),console.log("- logging: Logger configuration"),console.log("- performance: Performance measurement tools"),console.log("%cGame Mechanics:","font-weight: bold;"),console.log("- generators: Generator manager access"),console.log("- generator_debug: Generator debugging tools"),console.log("- upgrades: Upgrade manager access"),console.log("- upgrade_debug: Upgrade debugging tools"),console.log("- explorer: Explorer manager access"),console.groupEnd(),"Debug tools help displayed in console"}D();const M={state:b,events:m,gameCore:f,gameLoop:h,ui:v,generators:S,upgrades:k,explorer:A,save:_,time:w,resources:x,inspect:C,events_debug:G,logging:B,generator_debug:E,upgrade_debug:L,reset:U,performance:$,help:D}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsYUFDQUMsV0FDQUMsV0FDQUMsT0FDQUssT0FDQVEsWUFDQVksVUFDQVMsZUFDQVMsVUFDQU8sa0JBQ0FpQixnQkFDQVUsUUFDQVMsY0FDQU0sTyIsInNvdXJjZXMiOlsid2VicGFjazovL2J1Zm8tY2xpY2tlci8uL3NyYy91dGlscy9kZWJ1Z1Rvb2xzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFN0YXRlTWFuYWdlciB9IGZyb20gJy4uL2NvcmUvc3RhdGVNYW5hZ2VyJztcbmltcG9ydCB7IGdldEV2ZW50QnVzIH0gZnJvbSAnLi4vY29yZS9ldmVudEJ1cyc7XG5pbXBvcnQgeyBnZXRHYW1lQ29yZSB9IGZyb20gJy4uL2dhbWUvZ2FtZUNvcmUnO1xuaW1wb3J0IHsgZ2V0R2FtZUxvb3AgfSBmcm9tICcuLi9nYW1lL2dhbWVMb29wJztcbmltcG9ydCB7IGdldFVJTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL1VJTWFuYWdlcic7XG5pbXBvcnQgeyBnZXRHZW5lcmF0b3JNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvZ2VuZXJhdG9yTWFuYWdlcic7XG5pbXBvcnQgeyBnZXRVcGdyYWRlTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL3VwZ3JhZGVNYW5hZ2VyJztcbmltcG9ydCB7IGdldEV4cGxvcmVyTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL2V4cGxvcmVyTWFuYWdlcic7XG5pbXBvcnQgeyBleHBvcnRTYXZlLCBpbXBvcnRTYXZlLCBzYXZlR2FtZSwgbG9hZEdhbWUgfSBmcm9tICcuLi9nYW1lL2dhbWVTYXZlJztcbmltcG9ydCAqIGFzIExvZ2dlciBmcm9tICcuL2xvZ2dlcic7XG5cbi8qKlxuICogRGVidWcgVG9vbHNcbiAqIFxuICogUHJvdmlkZXMgZGVidWdnaW5nIHV0aWxpdGllcyBhY2Nlc3NpYmxlIGluIGRldmVsb3BtZW50IG1vZGVcbiAqIERvIG5vdCBpbXBvcnQgdGhpcyBmaWxlIGluIHByb2R1Y3Rpb24gY29kZSFcbiAqL1xuXG4vLyBFeHBvcnQgY29yZSBzeXN0ZW1zIGZvciBkZWJ1Z2dpbmdcbmV4cG9ydCBjb25zdCBzdGF0ZSA9IGdldFN0YXRlTWFuYWdlcigpO1xuZXhwb3J0IGNvbnN0IGV2ZW50cyA9IGdldEV2ZW50QnVzKCk7XG5leHBvcnQgY29uc3QgZ2FtZUNvcmUgPSBnZXRHYW1lQ29yZSgpO1xuZXhwb3J0IGNvbnN0IGdhbWVMb29wID0gZ2V0R2FtZUxvb3AoKTtcbmV4cG9ydCBjb25zdCB1aSA9IGdldFVJTWFuYWdlcigpO1xuXG4vLyBFeHBvcnQgbWFuYWdlcnMgZm9yIGRlYnVnZ2luZ1xuZXhwb3J0IGNvbnN0IGdlbmVyYXRvcnMgPSBnZXRHZW5lcmF0b3JNYW5hZ2VyKCk7XG5leHBvcnQgY29uc3QgdXBncmFkZXMgPSBnZXRVcGdyYWRlTWFuYWdlcigpO1xuZXhwb3J0IGNvbnN0IGV4cGxvcmVyID0gZ2V0RXhwbG9yZXJNYW5hZ2VyKCk7XG5cbi8vIFNhdmUvbG9hZCBoZWxwZXJzXG5leHBvcnQgY29uc3Qgc2F2ZSA9IHtcbiAgc2F2ZTogKCkgPT4gc2F2ZUdhbWUoKSxcbiAgbG9hZDogKCkgPT4gbG9hZEdhbWUoKSxcbiAgZXhwb3J0OiAoKSA9PiBleHBvcnRTYXZlKCksXG4gIGltcG9ydDogKHNhdmVTdHJpbmc6IHN0cmluZykgPT4gaW1wb3J0U2F2ZShzYXZlU3RyaW5nKVxufTtcblxuLy8gVGltZSBjb250cm9sXG5leHBvcnQgY29uc3QgdGltZSA9IHtcbiAgcGF1c2U6ICgpID0+IGdhbWVMb29wLnN0b3AoKSxcbiAgcmVzdW1lOiAoKSA9PiBnYW1lTG9vcC5zdGFydCgpLFxuICBzZXRUaW1lU2NhbGU6IChzY2FsZTogbnVtYmVyKSA9PiBnYW1lTG9vcC5zZXRUaW1lU2NhbGUoc2NhbGUpLFxuICBnZXRUaW1lU2NhbGU6ICgpID0+IGdhbWVMb29wLmdldFRpbWVTY2FsZSgpXG59O1xuXG4vLyBSZXNvdXJjZSBtYW5pcHVsYXRpb25cbmV4cG9ydCBjb25zdCByZXNvdXJjZXMgPSB7XG4gIGFkZDogKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgY3VycmVudFN0YXRlID0gc3RhdGUuZ2V0U3RhdGUoKTtcbiAgICBzdGF0ZS5zZXRTdGF0ZSh7XG4gICAgICByZXNvdXJjZXM6IHtcbiAgICAgICAgYnVmb3M6IGN1cnJlbnRTdGF0ZS5yZXNvdXJjZXMuYnVmb3MgKyBhbW91bnQsXG4gICAgICAgIHRvdGFsQnVmb3M6IGN1cnJlbnRTdGF0ZS5yZXNvdXJjZXMudG90YWxCdWZvcyArIGFtb3VudFxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjdXJyZW50U3RhdGUucmVzb3VyY2VzLmJ1Zm9zICsgYW1vdW50O1xuICB9LFxuICBzZXQ6IChhbW91bnQ6IG51bWJlcikgPT4ge1xuICAgIHN0YXRlLnNldFN0YXRlKHtcbiAgICAgIHJlc291cmNlczoge1xuICAgICAgICBidWZvczogYW1vdW50LFxuICAgICAgICB0b3RhbEJ1Zm9zOiBNYXRoLm1heChhbW91bnQsIHN0YXRlLmdldFN0YXRlKCkucmVzb3VyY2VzLnRvdGFsQnVmb3MpXG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGFtb3VudDtcbiAgfSxcbiAgZ2V0OiAoKSA9PiB7XG4gICAgY29uc3QgY3VycmVudFN0YXRlID0gc3RhdGUuZ2V0U3RhdGUoKTtcbiAgICByZXR1cm4ge1xuICAgICAgYnVmb3M6IGN1cnJlbnRTdGF0ZS5yZXNvdXJjZXMuYnVmb3MsXG4gICAgICB0b3RhbEJ1Zm9zOiBjdXJyZW50U3RhdGUucmVzb3VyY2VzLnRvdGFsQnVmb3NcbiAgICB9O1xuICB9XG59O1xuXG4vLyBHYW1lIHN0YXRlIGluc3BlY3Rpb25cbmV4cG9ydCBjb25zdCBpbnNwZWN0ID0ge1xuICBzdGF0ZTogKCkgPT4gc3RhdGUuZ2V0U3RhdGUoKSxcbiAgZ2VuZXJhdG9yczogKCkgPT4gZ2VuZXJhdG9ycy5nZXRBbGxHZW5lcmF0b3JzKCksXG4gIHVwZ3JhZGVzOiAoKSA9PiB7XG4gICAgY29uc3QgcHVyY2hhc2VkVXBncmFkZXMgPSB1cGdyYWRlcy5nZXRQdXJjaGFzZWRVcGdyYWRlcygpO1xuICAgIGNvbnN0IGF2YWlsYWJsZVVwZ3JhZGVzID0gdXBncmFkZXMuZ2V0QXZhaWxhYmxlVXBncmFkZXMoKTtcbiAgICByZXR1cm4geyBwdXJjaGFzZWQ6IHB1cmNoYXNlZFVwZ3JhZGVzLCBhdmFpbGFibGU6IGF2YWlsYWJsZVVwZ3JhZGVzIH07XG4gIH0sXG4gIGV4cGxvcmVyOiAoKSA9PiBleHBsb3Jlci5nZXRFeHBsb3JlcigpLFxuICBwcm9kdWN0aW9uOiAoKSA9PiBnZW5lcmF0b3JzLmdldFByb2R1Y3Rpb25TdGF0cygpXG59O1xuXG4vLyBFdmVudCBkZWJ1Z2dpbmdcbmV4cG9ydCBjb25zdCBldmVudHNfZGVidWcgPSB7XG4gIGVuYWJsZURlYnVnOiAoKSA9PiBldmVudHMuc2V0RGVidWdNb2RlKHRydWUpLFxuICBkaXNhYmxlRGVidWc6ICgpID0+IGV2ZW50cy5zZXREZWJ1Z01vZGUoZmFsc2UpLFxuICBsaXN0RXZlbnRzOiAoKSA9PiBldmVudHMuZ2V0RXZlbnROYW1lcygpLFxuICBlbWl0OiAoZXZlbnROYW1lOiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IGV2ZW50cy5lbWl0KGV2ZW50TmFtZSwgZGF0YSlcbn07XG5cbi8vIExvZ2dlciBjb250cm9sc1xuZXhwb3J0IGNvbnN0IGxvZ2dpbmcgPSB7XG4gIHNldExldmVsOiAobGV2ZWw6IExvZ2dlci5Mb2dMZXZlbCkgPT4gTG9nZ2VyLnNldExvZ0xldmVsKGxldmVsKSxcbiAgZ2V0TGV2ZWw6ICgpID0+IExvZ2dlci5nZXRMb2dMZXZlbCgpLFxuICBlbmFibGVUaW1lc3RhbXBzOiAoZW5hYmxlOiBib29sZWFuKSA9PiBMb2dnZXIuZW5hYmxlVGltZXN0YW1wcyhlbmFibGUpLFxuICBlbmFibGVDb25zb2xlQ29sb3JzOiAoZW5hYmxlOiBib29sZWFuKSA9PiBMb2dnZXIuZW5hYmxlQ29uc29sZUNvbG9ycyhlbmFibGUpXG59O1xuXG5pbXBvcnQgeyBHZW5lcmF0b3JUeXBlIH0gZnJvbSAnLi4vbW9kZWxzL2dlbmVyYXRvcnMnO1xuXG4vLyBHZW5lcmF0b3IgbWFuaXB1bGF0aW9uXG5leHBvcnQgY29uc3QgZ2VuZXJhdG9yX2RlYnVnID0ge1xuICB1bmxvY2tBbGw6ICgpID0+IHtcbiAgICBjb25zdCBhbGxHZW5lcmF0b3JzID0gZ2VuZXJhdG9ycy5nZXRBbGxHZW5lcmF0b3JzKCk7XG4gICAgYWxsR2VuZXJhdG9ycy5mb3JFYWNoKGdlbmVyYXRvciA9PiB7XG4gICAgICBpZiAoIWdlbmVyYXRvci51bmxvY2tlZCkge1xuICAgICAgICBzdGF0ZS5zZXRTdGF0ZSh7XG4gICAgICAgICAgZ2VuZXJhdG9yczoge1xuICAgICAgICAgICAgW2dlbmVyYXRvci5pZF06IHtcbiAgICAgICAgICAgICAgdW5sb2NrZWQ6IHRydWUsXG4gICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBcIkFsbCBnZW5lcmF0b3JzIHVubG9ja2VkXCI7XG4gIH0sXG4gIGdpdmU6ICh0eXBlOiBzdHJpbmcsIGFtb3VudDogbnVtYmVyID0gMSkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHN0YXRlLmdldFN0YXRlKCk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHByb3ZpZGVkIHR5cGUgaXMgYSB2YWxpZCBHZW5lcmF0b3JUeXBlXG4gICAgaWYgKCFPYmplY3QudmFsdWVzKEdlbmVyYXRvclR5cGUpLmluY2x1ZGVzKHR5cGUgYXMgR2VuZXJhdG9yVHlwZSkpIHtcbiAgICAgIHJldHVybiBgR2VuZXJhdG9yICR7dHlwZX0gbm90IGZvdW5kIC0gdmFsaWQgdHlwZXMgYXJlOiAke09iamVjdC52YWx1ZXMoR2VuZXJhdG9yVHlwZSkuam9pbignLCAnKX1gO1xuICAgIH1cbiAgICBcbiAgICAvLyBTYWZlIHRvIGNhc3Qgc2luY2Ugd2UndmUgdmFsaWRhdGVkXG4gICAgY29uc3QgZ2VuZXJhdG9yVHlwZSA9IHR5cGUgYXMgR2VuZXJhdG9yVHlwZTtcbiAgICBjb25zdCBnZW5lcmF0b3IgPSBjdXJyZW50U3RhdGUuZ2VuZXJhdG9yc1tnZW5lcmF0b3JUeXBlXTtcbiAgICBcbiAgICBpZiAoIWdlbmVyYXRvcikge1xuICAgICAgcmV0dXJuIGBHZW5lcmF0b3IgJHt0eXBlfSBleGlzdHMgaW4gZW51bSBidXQgbm90IGluIHN0YXRlIC0gdGhpcyBpcyBhbiBlcnJvcmA7XG4gICAgfVxuICAgIFxuICAgIHN0YXRlLnNldFN0YXRlKHtcbiAgICAgIGdlbmVyYXRvcnM6IHtcbiAgICAgICAgW2dlbmVyYXRvclR5cGVdOiB7XG4gICAgICAgICAgY291bnQ6IGdlbmVyYXRvci5jb3VudCArIGFtb3VudFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmVjYWxjdWxhdGUgZ2VuZXJhdG9yc1xuICAgIGdlbmVyYXRvcnMucmVjYWxjdWxhdGVHZW5lcmF0b3IoZ2VuZXJhdG9yVHlwZSk7XG4gICAgXG4gICAgcmV0dXJuIGBBZGRlZCAke2Ftb3VudH0gJHtnZW5lcmF0b3IubmFtZX0gZ2VuZXJhdG9yc2A7XG4gIH1cbn07XG5cbi8vIFVwZ3JhZGUgbWFuaXB1bGF0aW9uXG5leHBvcnQgY29uc3QgdXBncmFkZV9kZWJ1ZyA9IHtcbiAgdW5sb2NrQWxsOiAoKSA9PiB7XG4gICAgY29uc3QgYWxsVXBncmFkZXMgPSB1cGdyYWRlcy5nZXRBdmFpbGFibGVVcGdyYWRlcygpO1xuICAgIGNvbnN0IHB1cmNoYXNlZFVwZ3JhZGVzID0gdXBncmFkZXMuZ2V0UHVyY2hhc2VkVXBncmFkZXMoKTtcbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBzdGF0ZS5nZXRTdGF0ZSgpO1xuICAgIFxuICAgIC8vIE1ha2UgYWxsIHVwZ3JhZGVzIGF2YWlsYWJsZVxuICAgIHN0YXRlLnNldFN0YXRlKHtcbiAgICAgIHVwZ3JhZGVzOiB7XG4gICAgICAgIGF2YWlsYWJsZTogWy4uLmN1cnJlbnRTdGF0ZS51cGdyYWRlcy5hdmFpbGFibGUsIC4uLmFsbFVwZ3JhZGVzLm1hcCh1ID0+IHUuaWQpXVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBgVW5sb2NrZWQgJHthbGxVcGdyYWRlcy5sZW5ndGh9IHVwZ3JhZGVzYDtcbiAgfSxcbiAgcHVyY2hhc2U6ICh1cGdyYWRlSWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHVwZ3JhZGVzLnB1cmNoYXNlVXBncmFkZSh1cGdyYWRlSWQsIEluZmluaXR5KTtcbiAgICByZXR1cm4gcmVzdWx0LnN1Y2Nlc3MgPyBgUHVyY2hhc2VkIHVwZ3JhZGUgJHt1cGdyYWRlSWR9YCA6IGBGYWlsZWQgdG8gcHVyY2hhc2UgJHt1cGdyYWRlSWR9YDtcbiAgfVxufTtcblxuLy8gUmVzZXQgZnVuY3Rpb25zXG5leHBvcnQgY29uc3QgcmVzZXQgPSB7XG4gIHNvZnRSZXNldDogKCkgPT4ge1xuICAgIGdhbWVDb3JlLnJlc2V0U3RhdGUoKTtcbiAgICByZXR1cm4gXCJHYW1lIHN0YXRlIHJlc2V0XCI7XG4gIH0sXG4gIGhhcmRSZXNldDogKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICByZXR1cm4gXCJMb2NhbCBzdG9yYWdlIGNsZWFyZWQsIHJlbG9hZGluZyBwYWdlXCI7XG4gIH1cbn07XG5cbi8vIFBlcmZvcm1hbmNlIG1lYXN1cmVtZW50XG5leHBvcnQgY29uc3QgcGVyZm9ybWFuY2UgPSB7XG4gIG1lYXN1cmU6IChsYWJlbDogc3RyaW5nLCBmbjogKCkgPT4gdm9pZCkgPT4ge1xuICAgIGNvbnNvbGUudGltZShsYWJlbCk7XG4gICAgdHJ5IHtcbiAgICAgIGZuKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGNvbnNvbGUudGltZUVuZChsYWJlbCk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBQcmludCBoZWxwIGluZm9ybWF0aW9uXG5leHBvcnQgZnVuY3Rpb24gaGVscCgpIHtcbiAgY29uc29sZS5ncm91cCgnJWPwn5C4IEJ1Zm8gSWRsZSBEZWJ1ZyBUb29scyDwn5C4JywgJ2NvbG9yOiAjNENBRjUwOyBmb250LXdlaWdodDogYm9sZDsnKTtcbiAgXG4gIGNvbnNvbGUubG9nKCclY1N0YXRlIE1hbmFnZW1lbnQ6JywgJ2ZvbnQtd2VpZ2h0OiBib2xkOycpO1xuICBjb25zb2xlLmxvZygnLSBzdGF0ZTogQWNjZXNzIHRvIHRoZSBzdGF0ZSBtYW5hZ2VyJyk7XG4gIGNvbnNvbGUubG9nKCctIGluc3BlY3Q6IEZ1bmN0aW9ucyB0byBpbnNwZWN0IGdhbWUgc3RhdGUnKTtcbiAgY29uc29sZS5sb2coJy0gcmVzb3VyY2VzOiBNYW5pcHVsYXRlIGdhbWUgcmVzb3VyY2VzJyk7XG4gIFxuICBjb25zb2xlLmxvZygnJWNHYW1lIENvbnRyb2w6JywgJ2ZvbnQtd2VpZ2h0OiBib2xkOycpO1xuICBjb25zb2xlLmxvZygnLSBnYW1lQ29yZTogQWNjZXNzIHRvIHRoZSBnYW1lIGNvcmUnKTtcbiAgY29uc29sZS5sb2coJy0gZ2FtZUxvb3A6IEFjY2VzcyB0byB0aGUgZ2FtZSBsb29wJyk7XG4gIGNvbnNvbGUubG9nKCctIHRpbWU6IENvbnRyb2wgZ2FtZSB0aW1lJyk7XG4gIFxuICBjb25zb2xlLmxvZygnJWNTYXZpbmcvTG9hZGluZzonLCAnZm9udC13ZWlnaHQ6IGJvbGQ7Jyk7XG4gIGNvbnNvbGUubG9nKCctIHNhdmU6IFNhdmUvbG9hZC9leHBvcnQvaW1wb3J0IGZ1bmN0aW9ucycpO1xuICBjb25zb2xlLmxvZygnLSByZXNldDogUmVzZXQgZ2FtZSBzdGF0ZScpO1xuICBcbiAgY29uc29sZS5sb2coJyVjRGVidWdnaW5nOicsICdmb250LXdlaWdodDogYm9sZDsnKTtcbiAgY29uc29sZS5sb2coJy0gZXZlbnRzOiBFdmVudCBidXMgYWNjZXNzJyk7XG4gIGNvbnNvbGUubG9nKCctIGV2ZW50c19kZWJ1ZzogRXZlbnQgZGVidWdnaW5nIHRvb2xzJyk7XG4gIGNvbnNvbGUubG9nKCctIGxvZ2dpbmc6IExvZ2dlciBjb25maWd1cmF0aW9uJyk7XG4gIGNvbnNvbGUubG9nKCctIHBlcmZvcm1hbmNlOiBQZXJmb3JtYW5jZSBtZWFzdXJlbWVudCB0b29scycpO1xuICBcbiAgY29uc29sZS5sb2coJyVjR2FtZSBNZWNoYW5pY3M6JywgJ2ZvbnQtd2VpZ2h0OiBib2xkOycpO1xuICBjb25zb2xlLmxvZygnLSBnZW5lcmF0b3JzOiBHZW5lcmF0b3IgbWFuYWdlciBhY2Nlc3MnKTtcbiAgY29uc29sZS5sb2coJy0gZ2VuZXJhdG9yX2RlYnVnOiBHZW5lcmF0b3IgZGVidWdnaW5nIHRvb2xzJyk7XG4gIGNvbnNvbGUubG9nKCctIHVwZ3JhZGVzOiBVcGdyYWRlIG1hbmFnZXIgYWNjZXNzJyk7XG4gIGNvbnNvbGUubG9nKCctIHVwZ3JhZGVfZGVidWc6IFVwZ3JhZGUgZGVidWdnaW5nIHRvb2xzJyk7XG4gIGNvbnNvbGUubG9nKCctIGV4cGxvcmVyOiBFeHBsb3JlciBtYW5hZ2VyIGFjY2VzcycpO1xuICBcbiAgY29uc29sZS5ncm91cEVuZCgpO1xuICBcbiAgcmV0dXJuIFwiRGVidWcgdG9vbHMgaGVscCBkaXNwbGF5ZWQgaW4gY29uc29sZVwiO1xufVxuXG4vLyBDYWxsIGhlbHAgYnkgZGVmYXVsdCB3aGVuIGFjY2Vzc2VkIGluIGNvbnNvbGVcbmhlbHAoKTtcblxuLy8gUmV0dXJuIGV2ZXJ5dGhpbmcgaW4gYSBzaW5nbGUgb2JqZWN0IGZvciBlYXN5IGFjY2Vzc1xuZXhwb3J0IGRlZmF1bHQge1xuICBzdGF0ZSxcbiAgZXZlbnRzLFxuICBnYW1lQ29yZSxcbiAgZ2FtZUxvb3AsXG4gIHVpLFxuICBnZW5lcmF0b3JzLFxuICB1cGdyYWRlcyxcbiAgZXhwbG9yZXIsXG4gIHNhdmUsXG4gIHRpbWUsXG4gIHJlc291cmNlcyxcbiAgaW5zcGVjdCxcbiAgZXZlbnRzX2RlYnVnLFxuICBsb2dnaW5nLFxuICBnZW5lcmF0b3JfZGVidWcsXG4gIHVwZ3JhZGVfZGVidWcsXG4gIHJlc2V0LFxuICBwZXJmb3JtYW5jZSxcbiAgaGVscFxufTsiXSwibmFtZXMiOlsic3RhdGUiLCJldmVudHMiLCJnYW1lQ29yZSIsImdhbWVMb29wIiwidWkiLCJnZW5lcmF0b3JzIiwidXBncmFkZXMiLCJleHBsb3JlciIsInNhdmUiLCJsb2FkIiwiZXhwb3J0IiwiaW1wb3J0Iiwic2F2ZVN0cmluZyIsInRpbWUiLCJwYXVzZSIsInN0b3AiLCJyZXN1bWUiLCJzdGFydCIsInNldFRpbWVTY2FsZSIsInNjYWxlIiwiZ2V0VGltZVNjYWxlIiwicmVzb3VyY2VzIiwiYWRkIiwiYW1vdW50IiwiY3VycmVudFN0YXRlIiwiZ2V0U3RhdGUiLCJzZXRTdGF0ZSIsImJ1Zm9zIiwidG90YWxCdWZvcyIsInNldCIsIk1hdGgiLCJtYXgiLCJnZXQiLCJpbnNwZWN0IiwiZ2V0QWxsR2VuZXJhdG9ycyIsInB1cmNoYXNlZCIsImdldFB1cmNoYXNlZFVwZ3JhZGVzIiwiYXZhaWxhYmxlIiwiZ2V0QXZhaWxhYmxlVXBncmFkZXMiLCJnZXRFeHBsb3JlciIsInByb2R1Y3Rpb24iLCJnZXRQcm9kdWN0aW9uU3RhdHMiLCJldmVudHNfZGVidWciLCJlbmFibGVEZWJ1ZyIsInNldERlYnVnTW9kZSIsImRpc2FibGVEZWJ1ZyIsImxpc3RFdmVudHMiLCJnZXRFdmVudE5hbWVzIiwiZW1pdCIsImV2ZW50TmFtZSIsImRhdGEiLCJsb2dnaW5nIiwic2V0TGV2ZWwiLCJsZXZlbCIsImdldExldmVsIiwiZW5hYmxlVGltZXN0YW1wcyIsImVuYWJsZSIsImVuYWJsZUNvbnNvbGVDb2xvcnMiLCJnZW5lcmF0b3JfZGVidWciLCJ1bmxvY2tBbGwiLCJmb3JFYWNoIiwiZ2VuZXJhdG9yIiwidW5sb2NrZWQiLCJpZCIsImVuYWJsZWQiLCJnaXZlIiwidHlwZSIsIk9iamVjdCIsInZhbHVlcyIsImluY2x1ZGVzIiwiam9pbiIsImdlbmVyYXRvclR5cGUiLCJjb3VudCIsInJlY2FsY3VsYXRlR2VuZXJhdG9yIiwibmFtZSIsInVwZ3JhZGVfZGVidWciLCJhbGxVcGdyYWRlcyIsIm1hcCIsInUiLCJsZW5ndGgiLCJwdXJjaGFzZSIsInVwZ3JhZGVJZCIsInB1cmNoYXNlVXBncmFkZSIsIkluZmluaXR5Iiwic3VjY2VzcyIsInJlc2V0Iiwic29mdFJlc2V0IiwicmVzZXRTdGF0ZSIsImhhcmRSZXNldCIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJwZXJmb3JtYW5jZSIsIm1lYXN1cmUiLCJsYWJlbCIsImZuIiwiY29uc29sZSIsInRpbWVFbmQiLCJoZWxwIiwiZ3JvdXAiLCJsb2ciLCJncm91cEVuZCJdLCJzb3VyY2VSb290IjoiIn0=